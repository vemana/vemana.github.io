<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>How to think about programs &amp; programming? ABIYZ: inspired by age old tools like arithmetic. | Vemana's Space.</title> <meta name="author" content="Subrahmanyam "> <meta name="description" content="A deep introspection of how we use arithmetic reveals a powerful pattern for programming."> <meta name="keywords" content="software-engineering, math"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://vemana.github.io/blog/2023/abiyz-intro/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Vemana's Space.</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">How to think about programs &amp; programming? ABIYZ: inspired by age old tools like arithmetic.</h1> <p class="post-meta">November 19, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/software-abiyz"> <i class="fas fa-hashtag fa-sm"></i> software-abiyz</a>     ·   <a href="/blog/category/software-engineering"> <i class="fas fa-tag fa-sm"></i> software-engineering</a>   </p> </header> <article class="post-content"> <div id="table-of-contents"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h1"> <a href="#problem-statement">Problem Statement</a> <ul> <li class="toc-entry toc-h2"><a href="#a-thought-experiment-example">A thought experiment example</a></li> <li class="toc-entry toc-h2"><a href="#abiyz-pattern">ABIYZ pattern</a></li> </ul> </li> <li class="toc-entry toc-h1"> <a href="#relevance-for-software-engineering">Relevance for Software Engineering</a> <ul> <li class="toc-entry toc-h2"><a href="#example-1">Example 1</a></li> <li class="toc-entry toc-h2"><a href="#example-2">Example 2</a></li> <li class="toc-entry toc-h2"><a href="#example-3">Example 3</a></li> <li class="toc-entry toc-h2"><a href="#example-4">Example 4</a></li> </ul> </li> <li class="toc-entry toc-h1"><a href="#summary">Summary</a></li> </ul> </div> <hr> <div id="markdown-content"> <h1 id="problem-statement">Problem Statement</h1> <p>A compiler catches errors and more importantly guides us towards syntactically valid programs. Is there a similar guide for thinking about programs &amp; programming? Some thing/process that can help us design systems &amp; program them better ?</p> <h2 id="a-thought-experiment-example">A thought experiment example</h2> <p>Ultimately, programs transform inputs to outputs. Those inputs and outputs have some meaning to humans. Such transforms are common even outside programming; that is, in the real world. We don’t think twice when performing such transforms, but we can learn something by examining one such example in depth.</p> <blockquote class="block-warning"> <p>Problem <code class="language-plaintext highlighter-rouge">Work Desk Area in English</code>: Calculate the surface area of your work desk and express it in words, like <code class="language-plaintext highlighter-rouge">Forty Two</code> or <code class="language-plaintext highlighter-rouge">Sixteen</code>.</p> </blockquote> <p>Your solution likely goes like this:</p> <ol> <li>Model the work desk as a rectangle.</li> <li>Measure the lengths of sides of the desk and consider them to be the rectangle’s dimensions <ul> <li>Capture the dimensions in <code class="language-plaintext highlighter-rouge">PVDS</code> (Place Value Decimal System). Other systems would be possible, for example, binary.</li> </ul> </li> <li>Compute the area using Rectangle’s area formula. <ul> <li>Perform a multiplication of the dimensions in PVDS using some multiplication algorithm</li> <li>The area is now available in PVDS</li> </ul> </li> <li>Take the area in PVDS and announce it in words</li> </ol> <p>We can even <strong>generalize</strong> the solution approach.</p> <pre><code class="language-mermaid">flowchart TD

A[Input] -- Transform --&gt; B[Input]
Y[Output] -- Transform --&gt; Z[Output]
subgraph psd ["Problem Solving Domain"]
B -- Solve --&gt; Y
end
subgraph rwd ["Problem Domain"]
A -. Overall Transform .-&gt; Z
end
psd ~~~ rwd
</code></pre> <p>In the <code class="language-plaintext highlighter-rouge">Work Desk area in English</code>, the Problem Solving Domain (i.e. the abstract world) is Geometry &amp; Arithmetic.</p> <pre><code class="language-mermaid">flowchart TD

A[Work Desk] -- Transform --&gt; B[Height &amp; Width in PVDS]
Y[Area expressed in PVDS] -- Transform --&gt; Z[Forty Two]
subgraph psd ["Domain: Geometry &amp; Arithmetic"]
B -- Multiplication --&gt; Y
end
subgraph rwd ["Domain: Work Desk, Words like Forty Two"]
A -. Work Desk area in English .-&gt; Z
end
psd ~~~~~ rwd
</code></pre> <blockquote class="block-tip"> <p>We can <strong>generalize a pattern of problem solving</strong> from the thought experiment:</p> <ul> <li>To solve a problem, we need to utilize general tools (like geometry, arithmetic) <ul> <li><strong>The tools are abstract, human-invented things and only work with human-invented concepts</strong></li> <li>For example, numbers, place value decimal systems, rectangles, multiplication are all abstract concepts/tools</li> </ul> </li> <li>There’s an abstraction corresponding to Input &amp; Output within each of the two domains, Problem domain &amp; Problem solving domain <ul> <li>In the <strong>Problem domain</strong>, the Input is the Work Desk and the output is English words</li> <li>In the <strong>Problem Solving domain</strong>, Input is length &amp; breadth of a rectangle (in PVDS) and the output is an Area (in PVDS)</li> </ul> </li> <li>To solve the problem, the following steps are followed <ul> <li>Input from Problem Domain is converted to Input in Problem Solving Domain</li> <li>The problem is solved in the Problem solving domain <ul> <li>The <code class="language-plaintext highlighter-rouge">Work Desk Area</code> problem is solved by multiplying the length &amp; breadth</li> </ul> </li> <li>Output from Problem Solving Domain is converted to Output in Problem Domain</li> </ul> </li> </ul> </blockquote> <h2 id="abiyz-pattern">ABIYZ pattern</h2> <p>Let’s name this pattern of problem solving since we’ll refer to it later. Let’s call it ABIYZ (for reasons not explained here).</p> <blockquote> <p>Good scientific laws lead to inferring other scientific laws. For example, Ole Roemer inferred that light had finite speed. He deduced this from the observations that eclipses occur at different times than predicted based on Earth’s distance to Jupiter. He held that planetary laws were immutable and looked for a different explanation of the observations.</p> </blockquote> <p>Similar to Roemer’s method, we too would like to hold some tenets of software engineering as immutable so that we can discover others when something doesn’t quite make sense. What are those tenets? Just like the compiler only allows syntactically valid programs, these tenets should lead to clean, explainable programs.</p> <p>I’ve been using ABIYZ as one of those immutable tenets and my experience has been very pleasant. It has helped me in designing clearly and avoiding sphagetti mess in code. I have also found it helpful to understand large frameworks.</p> <h1 id="relevance-for-software-engineering">Relevance for Software Engineering</h1> <p>In the Work Desk example, we used a Problem Solving Domain already available for us (arithmetic, geometry) where as <strong>in programming, we need to invent the Domain and the tools ourself</strong>.</p> <blockquote class="block-tip"> <p>Good software engineering requires inventing the concept of Place Value Decimal System and the Multiplication algorithm to solve the Work Desk Area problem. Numbers and arithmetic is a good problem solving domain for the area problem.</p> </blockquote> <p>Different problems will require different domains. Let’s see some examples.</p> <hr> <h2 id="example-1">Example 1</h2> <p>Let’s consider implementing the <code class="language-plaintext highlighter-rouge">eval</code> function.</p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>An expression String, like <code class="language-plaintext highlighter-rouge">(42 * 5) + 3</code> </td> </tr> <tr> <td>Output</td> <td>The evaluation result, in words</td> </tr> <tr> <td>Function signature</td> <td><code class="language-plaintext highlighter-rouge">String eval(String expression)</code></td> </tr> <tr> <td>Example</td> <td> <code class="language-plaintext highlighter-rouge">eval("(42 * 5) + 3")</code> returns <code class="language-plaintext highlighter-rouge">"Two Hundred And Thirteen"</code> </td> </tr> </tbody> </table> <p><br> To use the ABIYZ pattern,we need to answer a few questions:</p> <table> <thead> <tr> <th>Question</th> <th>Answer</th> </tr> </thead> <tbody> <tr> <td>How’s the input modeled in the PSD (Problem Solving Domain) ?</td> <td>Expression Tree</td> </tr> <tr> <td>How’s the output modeled in the PSD?</td> <td><code class="language-plaintext highlighter-rouge">long</code></td> </tr> <tr> <td>How is “Solve” modeled in PSD?</td> <td> <code class="language-plaintext highlighter-rouge">evaluateTree</code> function</td> </tr> <tr> <td>What transforms the Input to PSD from PD?</td> <td> <code class="language-plaintext highlighter-rouge">parse</code> function</td> </tr> <tr> <td>What transforms the Output to PD from PSD?</td> <td> <code class="language-plaintext highlighter-rouge">toWords</code> function</td> </tr> </tbody> </table> <p><br></p> <pre><code class="language-mermaid">flowchart TD
A["`Expression String, e.g. 42*5+3`"] -- parse --&gt; B["`**Expression Tree**, 
e.g. +( *(42, 5), 3)`"]
Y[long, e.g. 213] -- toWords --&gt; Z[English words, e.g. Two Hundred and Thirteen]
subgraph psd ["Problem Solving Domain"]
B -- evaluateTree --&gt; Y
end
subgraph pd ["Problem Domain"]
A -. Evaluate expression &amp; output result in English.-&gt; Z
end
psd ~~~~~ pd
</code></pre> <hr> <p>Once the ABIYZ questions are answered, we can model the classes &amp; implement the functions:</p> <ul> <li>Classes <ul> <li><code class="language-plaintext highlighter-rouge">ExpressionTree</code></li> </ul> </li> <li>Functions <ul> <li><code class="language-plaintext highlighter-rouge">ExpressionTree parse(String input)</code></li> <li><code class="language-plaintext highlighter-rouge">long evaluateTree(ExpressionTree exprTree)</code></li> <li><code class="language-plaintext highlighter-rouge">String toWords(long value)</code></li> </ul> </li> </ul> <p>The <code class="language-plaintext highlighter-rouge">ExpressionTree</code> class is straightforward</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// An ExpressionTree is either of</span>
<span class="c1">// Addition, Multiplication or just a Number.</span>
<span class="n">sealed</span> <span class="kd">interface</span> <span class="nc">ExpressionTree</span> <span class="o">{</span>
  <span class="n">record</span> <span class="nf">Addition</span><span class="o">(</span><span class="nc">Expression</span> <span class="n">left</span><span class="o">,</span> <span class="nc">Expression</span> <span class="n">right</span><span class="o">)</span> <span class="kd">implements</span> <span class="nc">Expression</span> <span class="o">{}</span>
  <span class="n">record</span> <span class="nf">Multiplication</span><span class="o">(</span><span class="nc">Expression</span> <span class="n">left</span><span class="o">,</span> <span class="nc">Expression</span> <span class="n">right</span><span class="o">)</span> <span class="kd">implements</span> <span class="nc">Expression</span> <span class="o">{}</span>
  <span class="n">record</span> <span class="nf">Number</span><span class="o">(</span><span class="kt">long</span> <span class="n">value</span><span class="o">)</span> <span class="kd">implements</span> <span class="nc">Expression</span> <span class="o">{}</span>
<span class="o">}</span>
</code></pre></div></div> <p>The overall <code class="language-plaintext highlighter-rouge">eval</code> function is trivial:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="nf">eval</span><span class="o">(</span><span class="nc">String</span> <span class="n">expression</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="nf">toWords</span><span class="o">(</span><span class="n">evaluateTree</span><span class="o">(</span><span class="n">parse</span><span class="o">(</span><span class="n">expression</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div> <p>The other functions are straightforward too (use any parser combinator or grammar tools for <code class="language-plaintext highlighter-rouge">parse</code> function) and we won’t implement them here.</p> <p><strong>KEY IDEAS</strong></p> <ul> <li>Asking the ABIYZ pattern questions can shed insights on how we think about the problem</li> <li>We invented new concepts (<code class="language-plaintext highlighter-rouge">ExpressionTree</code>) to simplify solving the problem</li> <li>As a bonus, the solution is clean and can be reused effectively. For example, many pieces can be reused for variations of the original problem: <ul> <li>Instead of outputting English Words, output Spanish words <ul> <li>Change the <code class="language-plaintext highlighter-rouge">toWords</code> function to <code class="language-plaintext highlighter-rouge">toSpanishWords</code>, <code class="language-plaintext highlighter-rouge">toEnglishWords</code> etc. Other functions don’t need to change</li> </ul> </li> <li>Instead of accepting a String expression, accept a visual input (i.e. need OCR) <ul> <li>Change the <code class="language-plaintext highlighter-rouge">parse</code> function to <code class="language-plaintext highlighter-rouge">parseOCR</code>. Other functions don’t need to change</li> </ul> </li> </ul> </li> </ul> <hr> <h2 id="example-2">Example 2</h2> <p>For this example, we’ll diff two json documents, the <code class="language-plaintext highlighter-rouge">jsonDiff</code> function.</p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>Two Json Strings</td> </tr> <tr> <td>Output</td> <td>A String capturing the diff result (see below)</td> </tr> <tr> <td>Function signature</td> <td><code class="language-plaintext highlighter-rouge">String jsonDiff(String leftJson, String rightJson)</code></td> </tr> </tbody> </table> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Diff output format

leftJson = {
    equal: 42
    unequal: 1
    leftOnly: "abc"
    child: {
        equal: 42
        leftOnly: "abc"
    }
    equalChild: {
        a: 1
        b: "bcd"
    }
    longString: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
}

rightJson = {
    equal: 42
    unequal: 2
    rightOnly: "xyz"    
    child: {
        equal: 42
        rightOnly: "xyz"
    }
    equalChild: {
        a: 1
        b: "bcd"
    }
}

jsonDiff(leftJson, rightJson) returns the following diff output:

!=  ROOT                                                                                        |
  ==  equal                        42                                                           |
  !=  unequal                      1                            | 2                             |
  !=  leftOnly                     "abc"                        | &lt;null&gt;                        |
  !=  rightOnly                    &lt;null&gt;                       | "xyz"                         |
  !=  longString                   "aaaaaaaaaaaaaaaaaaaaaaaaaaa | &lt;null&gt;                        |
                                   aaaaaaaaaaaaaaaaaaaaaaaaaaa" |                               |
  ==  equalChild                   {                                                            |
                                       a: 1                                                     |
                                       b: "bcd"                                                 |
                                   }                                                            |
  !=  child                                                                                     |
    ==  equal                      42                                                           |
    !=  leftOnly                   "abc"                        |  &lt;null&gt;                       |
    !=  rightOnly                  &lt;null&gt;                       |  "xyz"                        |
</code></pre></div></div> <p>For simplicity of exposition, let’s ignore List typed members of the Json (they don’t change the story).</p> <p>The rules of the diff strings are:</p> <ul> <li>There are 4 columns of the output, each of a fixed width. <ul> <li>Indicator, like <code class="language-plaintext highlighter-rouge">==</code> or <code class="language-plaintext highlighter-rouge">!=</code> </li> <li>Property name, indented, like <code class="language-plaintext highlighter-rouge">ROOT.child.leftOnly</code> </li> <li>Property value on the left side; displayed when there’s a diff</li> <li>Property value on the right side; displayed when there’s a diff</li> <li>Special case: When property values on both sides are equal, display it after merging the columns of the left &amp; right sides</li> <li>Special note: There’s a separator <code class="language-plaintext highlighter-rouge">|</code> between left and right side columns unless they are merged.</li> </ul> </li> <li>Each property will have one horizontal entry (it could span multiple lines like <code class="language-plaintext highlighter-rouge">equalChild</code>)</li> <li>Equal properties have their values displayed. E.g. <code class="language-plaintext highlighter-rouge">equalChild</code> and <code class="language-plaintext highlighter-rouge">equal</code> properties</li> <li>Inequal properties have both sided values displayed. E.g. <code class="language-plaintext highlighter-rouge">unequal</code> </li> <li>Properties that occur on only one side should have their values displayed. E.g. <code class="language-plaintext highlighter-rouge">leftOnly</code> &amp; <code class="language-plaintext highlighter-rouge">rightOnly</code>. The special <code class="language-plaintext highlighter-rouge">&lt;null&gt;</code> indicates lack of value for the property. For example, there’s no property named <code class="language-plaintext highlighter-rouge">leftOnly</code> on the right side</li> </ul> <p><br> To use the ABIYZ pattern,we need to answer a few questions:</p> <table> <thead> <tr> <th>Question</th> <th>Answer</th> </tr> </thead> <tbody> <tr> <td>How’s input json modeled in the PSD (Problem Solving Domain) ?</td> <td>Using <code class="language-plaintext highlighter-rouge">JsonObject</code> </td> </tr> <tr> <td>How’s the output modeled in the PSD?</td> <td><code class="language-plaintext highlighter-rouge">TextBlock</code></td> </tr> <tr> <td>How is “solve” modeled in PSD?</td> <td> <code class="language-plaintext highlighter-rouge">diffJsonObjects</code> function</td> </tr> <tr> <td>What transforms the Input to PSD from PD?</td> <td> <code class="language-plaintext highlighter-rouge">jsonParse</code> function</td> </tr> <tr> <td>What transforms the Output to PD from PSD?</td> <td> <code class="language-plaintext highlighter-rouge">TextBlock.toString()</code> method</td> </tr> </tbody> </table> <pre><code class="language-mermaid">flowchart TD
A["`(Json string, Json string)`"] -- jsonParse --&gt; B["`(JsonObject, JsonObject)`"]
Y["`**TextBlock**`"] -- TextBlock.toString() --&gt; Z[diff string]
subgraph psd ["Problem Solving Domain"]
B -- diffJsonObjects --&gt; Y
end
subgraph pd ["Problem Domain"]
A -. Diff two json strings &amp; output them .-&gt; Z
end
psd ~~~~~ pd
</code></pre> <p>We’ve just invented two concepts that we expect will make it easier to solve the problem: <code class="language-plaintext highlighter-rouge">JsonObject</code> &amp; <code class="language-plaintext highlighter-rouge">TextBlock</code>. How do we go about defining them more clearly? We make a few observations:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">JsonObject</code> should have at least as much information as the input json strings</li> <li> <code class="language-plaintext highlighter-rouge">TextBlock</code> should have at least as much information as the final diff string</li> </ul> <p>What about the operations on these concepts? We make a few more clarifications:</p> <ul> <li>We create a different class for each of these concepts. Lets call them by the same name; so, we have two classes <code class="language-plaintext highlighter-rouge">JsonObject</code> and <code class="language-plaintext highlighter-rouge">TextBlock</code> </li> <li>The Operations on our Concepts translate to methods on our Classes.</li> <li>The operations are guided by how <code class="language-plaintext highlighter-rouge">diffJsonObjects</code> will utilize these concepts. <ul> <li>In other words, we are designing the tools (the methods) so that we can utilize them to help solve the problem easier.</li> </ul> </li> </ul> <p>This gives us an outline already.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sealed</span> <span class="kd">interface</span> <span class="nc">JsonObject</span> <span class="o">{</span>

  <span class="c1">// A Json value which happens to be another json</span>
  <span class="n">record</span> <span class="nf">JsonStruct</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">children</span><span class="o">)</span> <span class="kd">implements</span> <span class="nc">JsonObject</span> <span class="o">{</span>
    <span class="c1">// Obtain the value of a given property, if it exists</span>
    <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">getValue</span><span class="o">(</span><span class="nc">String</span> <span class="n">propertyName</span><span class="o">)</span> <span class="o">{...}</span>

    <span class="c1">// When we compute the diff, we need to inspect every property</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">JsonObject</span><span class="o">&gt;&gt;</span> <span class="nf">allChildren</span><span class="o">()</span> <span class="o">{...}</span>
  <span class="o">}</span>

  <span class="c1">// A Json value which happens to be just an integer</span>
  <span class="n">record</span> <span class="nf">JsonInteger</span><span class="o">(</span><span class="kt">long</span> <span class="n">value</span><span class="o">)</span> <span class="kd">implements</span> <span class="nc">JsonObject</span> <span class="o">{}</span>

  <span class="c1">// A Json value which happens to be just a string</span>
  <span class="n">record</span> <span class="nf">JsonString</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="kd">implements</span> <span class="nc">JsonObject</span> <span class="o">{}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Note how JsonStruct has methods that are used by <code class="language-plaintext highlighter-rouge">diffJsonObjects</code>. <br></p> <p>Now, let’s turn to <code class="language-plaintext highlighter-rouge">TextBlock</code>, which models the output diff string. Since it should capture the diff string, its structure should perhaps reflect the composition of the diff string. In other words, if we can express the diff string as being composed out of smaller individual units, we will have modeled <code class="language-plaintext highlighter-rouge">TextBlock</code>.</p> <p>In this image, we can see that the overall diff is composed out of a stack of vertical blocks</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/abiyz-intro-diff-multi-row-composition-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/abiyz-intro-diff-multi-row-composition-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/abiyz-intro-diff-multi-row-composition-1400.webp"></source> <img src="/assets/img/abiyz-intro-diff-multi-row-composition.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Each of those vertical blocks is composed out of horizontal blocks</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/abiyz-intro-diff-one-row-composition-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/abiyz-intro-diff-one-row-composition-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/abiyz-intro-diff-one-row-composition-1400.webp"></source> <img src="/assets/img/abiyz-intro-diff-one-row-composition.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>There’s recursive structure here &amp; we won’t go into full details but we are now ready to model the <code class="language-plaintext highlighter-rouge">TextBlock</code>.</p> <ul> <li>A <code class="language-plaintext highlighter-rouge">TextBlock</code> is a rectangular block of text</li> <li>Two <code class="language-plaintext highlighter-rouge">TextBlock</code>s can be combined either horizontally or vertically.</li> </ul> <p>That’s all we need to produce the diff string. So, we can now convert it into a simple class definition &amp; operations</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">TextBlock</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">height</span><span class="o">();</span>
  <span class="kt">int</span> <span class="nf">width</span><span class="o">();</span>
  <span class="c1">// Returns the list of lines that this TextBlock consists of</span>
  <span class="c1">// There will be #height() such returned lines</span>
  <span class="c1">// The size of each line will be #width() characters long</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">content</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">final</span> <span class="kd">class</span> <span class="nc">TextBlockOperations</span> <span class="o">{</span>
  <span class="c1">// Appends two TextBlocks side by side and returns this newly appended one.</span>
  <span class="c1">// Their top edges will be aligned.</span>
  <span class="c1">// If their bottom edges don't align, the shorter one will grow downwards to align</span>
  <span class="nc">TextBlock</span> <span class="nf">appendHorizontal</span><span class="o">(</span><span class="nc">TextBlock</span> <span class="n">left</span><span class="o">,</span> <span class="nc">TextBlock</span> <span class="n">right</span><span class="o">);</span>

  <span class="c1">// Appends two TextBlocks top to bottom and returns this newly appended one.</span>
  <span class="c1">// Their left edges will be aligned.</span>
  <span class="c1">// If their right edges don't align, the shorter one will grown to the right to align</span>
  <span class="nc">TextBlock</span> <span class="nf">appendVertical</span><span class="o">(</span><span class="nc">TextBlock</span> <span class="n">top</span><span class="o">,</span> <span class="nc">TextBlock</span> <span class="n">bottom</span><span class="o">);</span>

  <span class="c1">// Returns a TextBlock with the specified width and the specified content.</span>
  <span class="c1">// If the content is shorter than width, spaces are used to pad it to 'width'.</span>
  <span class="c1">// If content is larger than width, the TextBlock will keep gaining new height</span>
  <span class="c1">// to accommodate all of the content while never exceeding the width.</span>
  <span class="c1">// So, for width = 3, content = abcdefg, the returned TextBlock will look like</span>
  <span class="c1">// (excluding the enclosing | characters)</span>
  <span class="c1">// |abc|</span>
  <span class="c1">// |def|</span>
  <span class="c1">// |g  |</span>
  <span class="nc">TextBlock</span> <span class="nf">create</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">,</span> <span class="kt">int</span> <span class="n">width</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>It is straightforward to implement all the relevant functions. In particular, <code class="language-plaintext highlighter-rouge">diffJsonObjects</code> can construct the finall diff <code class="language-plaintext highlighter-rouge">TextBlock</code> by composing it step by step using the composition operations from <code class="language-plaintext highlighter-rouge">TextBlockOperations</code>.</p> <p>This example demonstrates how asking simple questions in the ABIYZ pattern enables us to write clean, modular, functional code. The fact that each of these concepts has its own classes means we can test them independently. For example, whether a TextBlock is implemented correctly has nothing to do with what it is used for (like the diffing here). In other words, the ABIYZ pattern encourages defining independent concepts which can then be tested separately.</p> <h2 id="example-3">Example 3</h2> <p>Consider a person communicating their thoughts with another person via text messaging. There’s ABIYZ hidden here too:</p> <pre><code class="language-mermaid">flowchart TD

A[Thought] -- Encode into SMS --&gt; B[SMS message]
Y[SMS message] -- Decode into thought --&gt; Z[Thought]
subgraph psd ["Problem Solving Domain"]
B -- Send SMS --&gt; Y
end
subgraph rwd ["Problem Domain"]
A -. Communicate Thoughts .-&gt; Z
end
psd ~~~~~ rwd
</code></pre> <p>In fact, we can drill down into this example and ask: <code class="language-plaintext highlighter-rouge">how are SMS getting transmitted?</code>. We can again use ABIYZ to reason about it, recursively. SMS are transformed into a Stream of Bytes which are sent across the network. Again, we can ask, <code class="language-plaintext highlighter-rouge">how are those bytes transferred?</code> and so on so forth until we get all the way down to transistors, then atoms, then subatomic particles etc.</p> <pre><code class="language-mermaid">flowchart TD

A[Thought] --&gt; B[SMS message]
B --&gt; C[Byte Stream]
C --&gt; D[EM Wave]
D -- transmit --&gt; W
W[EM wave] --&gt; X
X[Byte Stream] --&gt; Y
Y[SMS message] --&gt; Z[Thought]


subgraph four ["Electromagnetic waves"]
D
W
end

subgraph three ["Bytes"]
C
X
end

subgraph two ["SMS"]
B
Y
end

subgraph one ["Thoughts"]
A
Z
end

three ~~~~~ four
two ~~~~~ three
one ~~~~~ two
</code></pre> <h2 id="example-4">Example 4</h2> <p>ABIYZ also helps us understand software better. For example, understanding frontend frameworks like Angular (<a href="https://angular.io/docs" rel="external nofollow noopener" target="_blank">documentation</a>) for a beginner can be difficult. But, it can help to think in ABIYZ terms.</p> <p>Consider a website that shows a social media feed. The user sees some pixels corresponding to their social media feed. As the feed changes, the pixels change. Similarly, as the user interacts with the UI(filters/clicks etc), the feed changes. Angular aims to help manage this ping-pong. Looking at the Angular docs can be intimidating, but we can try to understand it better by asking the standard ABIYZ questions: what is the Problem Domain, the Problem Solving Domain and their corresponding concepts &amp; operations?</p> <p>Pretty soon, we get to the ABIYZ graph for a Button Click action. That is, when a user clicks a button, we want to update the UI in response. Typically, this will include fetching new data and/or changing the screen data/layout in response to the newly fetched data.</p> <pre><code class="language-mermaid">flowchart TD

A[Screen] -- Browser Sync --&gt; B[DOM]
B -- Angular Sync --&gt; C[Ng Template, App State]
C -- "Update App State (your code)" --&gt; X
X[Ng Template, Updated App State] -- Angular Sync --&gt; Y
Y[DOM] -- Browser Sync --&gt; Z[Updated Screen]

subgraph three ["Angular"]
C
X
end

subgraph one ["Visual, Biomechanical"]
A -. Clicks a Button .-&gt; Z
end

subgraph two ["Browser API"]
B
Y
end

one ~~~~~ two
two ~~~~~ three
</code></pre> <p>Angular becomes easier to understand &amp; retain once we understand the different domains (User’s senses, Browser, Angular). Angular simply models the DOM as a template with blanks filled from Application State (fancily called <code class="language-plaintext highlighter-rouge">data binding</code>). Your code to respond to the button then just needs to update the Application State and Angular is responsible for syncing it to the DOM. Of course, there is a LOT more to Angular than this, but asking ABIYZ questions provides a good start for understanding it more comprehensively.</p> <h1 id="summary">Summary</h1> <blockquote> <p>The purpose of abstraction is not to be vague, but to create a new semantic level in which one can be absolutely precise. - Dijkstra</p> </blockquote> <p>Perhaps the spirit of the ABIYZ pattern is succinctly captured by the Dijkstra quote. It encourages thinking in terms of different domains. Each domain has its own set of concepts and tools. <strong>We solve problems of one domain by modeling them as problems in another domain</strong> where they are more readily solvable. For a SWE, the challenge is to identify and create these domains in service of the problem at hand. The <code class="language-plaintext highlighter-rouge">diffJsonObjects</code> example demonstrated this thought process.</p> <p>To conclude, ABIYZ pattern of problem solving is a useful thought tool that can simplify designing clean, well-factored, well-tested programs for certain classes of programs. It is likely that software engineers are doing this very particular thing, but in an intuitive way when designing programs/systems. ABIYZ formalizes it so that we can approach even difficult problems logically.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/testing-calculator-homomorphism/">Can software testing be objective? Hello from Homomorphisms.</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/software-changes-and-aging/">Are there changes that accelerate software aging? Yes, here's a small list.</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/money-from-symmetry/">What is Money and where does it come from? An answer from symmetry.</a> </li> <div id="giscus_thread" style="max-width: 1200px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"vemana/vemana.github.io","data-repo-id":"R_kgDOKiX-Xw","data-category":"Comments","data-category-id":"DIC_kwDOKiX-X84CbJNA","data-mapping":"url","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Subrahmanyam . </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js" integrity="sha256-mm3Re3y7xlvh+yCD+l/Zs1d+PU0AEad93MkWvljfm/s=" crossorigin="anonymous"></script> <script>$(document).ready(function(){mermaid.initialize({startOnLoad:!0,theme:"default"}),window.mermaid.init(undefined,document.querySelectorAll(".language-mermaid"))});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>